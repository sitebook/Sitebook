<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos -->
			<title>Docs For Class TAuthorizationRule</title>
			<link rel="stylesheet" href="../media/stylesheet.css" />
			<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'/>
		</head>
		<body>
			<div class="page-body">			
<h2 class="class-name">Class TAuthorizationRule</h2>

<a name="sec-description"></a>
<div class="info-box">
	<div class="info-box-title">Description</div>
	<div class="nav-bar">
					<span class="disabled">Description</span> |
															<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
						
					</div>
	<div class="info-box-body">
        		<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">TAuthorizationRule class</p>
<p class="description"><p>TAuthorizationRule represents a single authorization rule.  A rule is specified by an action (required), a list of users (optional),  a list of roles (optional), a verb (optional), and a list of IP rules (optional).  Action can be either 'allow' or 'deny'.  Guest (anonymous, unauthenticated) users are represented by question mark '?'.  All users (including guest users) are represented by asterisk '*'.  Authenticated users are represented by '@'.  Users/roles are case-insensitive.  Different users/roles are separated by comma ','.  Verb can be either 'get' or 'post'. If it is absent, it means both.  IP rules are separated by comma ',' and can contain wild card in the rules (e.g. '192.132.23.33, 192.122.*.*')</p></p>
	<ul class="tags">
				<li><span class="field">author:</span> Qiang Xue &lt;<a href="mailto:qiang.xue@gmail.com">qiang.xue@gmail.com</a>&gt;</li>
				<li><span class="field">version:</span> $Id: TAuthorizationRule.php 3245 2013-01-07 20:23:32Z ctrlaltca $</li>
				<li><span class="field">since:</span> 3.0</li>
			</ul>
		<p class="notes">
			Located in <a class="field" href="_Security---TAuthorizationRule.php.html">/Security/TAuthorizationRule.php</a> (line <span class="field">32</span>)
		</p>
		
				
		<pre><a href="../System/TComponent.html">TComponent</a>
   |
   --TAuthorizationRule</pre>
	
			</div>
</div>




	<a name="sec-method-summary"></a>
	<div class="info-box">
		<div class="info-box-title">Method Summary</span></div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
												<span class="disabled">Methods</span> (<a href="#sec-methods">details</a>)
		</div>
		<div class="info-box-body">			
			<div class="method-summary">
																																																																																				
												<div class="method-definition">
											<span class="method-result">TAuthorizationRule</span>
										<a href="#__construct" title="details" class="method-name">__construct</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$action</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$users</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$roles</span>, [<span class="var-type">string</span>&nbsp;<span class="var-name">$verb</span> = <span class="var-default">''</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$ipRules</span> = <span class="var-default">''</span>])
									</div>
																<div class="method-definition">
											<span class="method-result">string</span>
										<a href="#getAction" title="details" class="method-name">getAction</a>
										()
									</div>
																<div class="method-definition">
											<span class="method-result">boolean</span>
										<a href="#getAuthenticatedApplied" title="details" class="method-name">getAuthenticatedApplied</a>
										()
									</div>
																<div class="method-definition">
											<span class="method-result">boolean</span>
										<a href="#getEveryoneApplied" title="details" class="method-name">getEveryoneApplied</a>
										()
									</div>
																<div class="method-definition">
											<span class="method-result">boolean</span>
										<a href="#getGuestApplied" title="details" class="method-name">getGuestApplied</a>
										()
									</div>
																<div class="method-definition">
											<span class="method-result">array</span>
										<a href="#getIPRules" title="details" class="method-name">getIPRules</a>
										()
									</div>
																<div class="method-definition">
											<span class="method-result">array</span>
										<a href="#getRoles" title="details" class="method-name">getRoles</a>
										()
									</div>
																<div class="method-definition">
											<span class="method-result">array</span>
										<a href="#getUsers" title="details" class="method-name">getUsers</a>
										()
									</div>
																<div class="method-definition">
											<span class="method-result">string</span>
										<a href="#getVerb" title="details" class="method-name">getVerb</a>
										()
									</div>
																<div class="method-definition">
											<span class="method-result">integer</span>
										<a href="#isUserAllowed" title="details" class="method-name">isUserAllowed</a>
											(<span class="var-type"></span>&nbsp;<span class="var-name">$user</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$verb</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$ip</span>)
									</div>
								</div>
		</div>
	</div>		

	
	<a name="sec-methods"></a>
	<div class="info-box">
		<div class="info-box-title">Methods</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
																<a href="#sec-method-summary">Methods</a> (<span class="disabled">details</span>)
						
		</div>
		<div class="info-box-body">
			<A NAME='method_detail'></A>

<a name="method__construct" id="__construct"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">Constructor __construct</span> (line <span class="line-number">75</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Constructor.</p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">TAuthorizationRule</span>
		<span class="method-name">
			__construct
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$action</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$users</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$roles</span>, [<span class="var-type">string</span>&nbsp;<span class="var-name">$verb</span> = <span class="var-default">''</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$ipRules</span> = <span class="var-default">''</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$action</span><span class="var-description">: action, either 'deny' or 'allow'</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$users</span><span class="var-description">: a comma separated user list</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$roles</span><span class="var-description">: a comma separated role list</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$verb</span><span class="var-description">: verb, can be empty, 'get', or 'post'</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$ipRules</span><span class="var-description">: IP rules (separated by comma, can contain wild card *)</span>			</li>
				</ul>
		
			
	</div>
<a name="methodgetAction" id="getAction"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">getAction</span> (line <span class="line-number">136</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
	<ul class="tags">
				<li><span class="field">return:</span> action, either 'allow' or 'deny'</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">string</span>
		<span class="method-name">
			getAction
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodgetAuthenticatedApplied" id="getAuthenticatedApplied"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">getAuthenticatedApplied</span> (line <span class="line-number">193</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
	<ul class="tags">
				<li><span class="field">return:</span> if this rule applies to authenticated users</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">boolean</span>
		<span class="method-name">
			getAuthenticatedApplied
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodgetEveryoneApplied" id="getEveryoneApplied"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">getEveryoneApplied</span> (line <span class="line-number">185</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
	<ul class="tags">
				<li><span class="field">return:</span> if this rule applies to everyone</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">boolean</span>
		<span class="method-name">
			getEveryoneApplied
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodgetGuestApplied" id="getGuestApplied"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">getGuestApplied</span> (line <span class="line-number">177</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
	<ul class="tags">
				<li><span class="field">return:</span> if this rule applies to everyone</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">boolean</span>
		<span class="method-name">
			getGuestApplied
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodgetIPRules" id="getIPRules"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">getIPRules</span> (line <span class="line-number">169</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
	<ul class="tags">
				<li><span class="field">return:</span> list of IP rules.</li>
				<li><span class="field">since:</span> 3.1.1</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">array</span>
		<span class="method-name">
			getIPRules
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodgetRoles" id="getRoles"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">getRoles</span> (line <span class="line-number">152</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
	<ul class="tags">
				<li><span class="field">return:</span> list of roles</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">array</span>
		<span class="method-name">
			getRoles
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodgetUsers" id="getUsers"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">getUsers</span> (line <span class="line-number">144</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
	<ul class="tags">
				<li><span class="field">return:</span> list of user IDs</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">array</span>
		<span class="method-name">
			getUsers
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodgetVerb" id="getVerb"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">getVerb</span> (line <span class="line-number">160</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
	<ul class="tags">
				<li><span class="field">return:</span> verb, may be empty, 'get', or 'post'.</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">string</span>
		<span class="method-name">
			getVerb
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodisUserAllowed" id="isUserAllowed"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">isUserAllowed</span> (line <span class="line-number">204</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
	<ul class="tags">
				<li><span class="field">return:</span> 1 if the user is allowed, -1 if the user is denied, 0 if the rule does not apply to the user</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">integer</span>
		<span class="method-name">
			isUserAllowed
		</span>
					(<span class="var-type"></span>&nbsp;<span class="var-name">$user</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$verb</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$ip</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type"><a href="../System/IUser.html">IUser</a></span>
				<span class="var-name">$user</span><span class="var-description">: the user object</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$verb</span><span class="var-description">: the request verb (GET, PUT)</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$ip</span><span class="var-description">: the request IP address</span>			</li>
				</ul>
		
			
	</div>
							<h4>Inherited Methods</h4>
				<a name='inherited_methods'><!-- --></a>	
									<!-- =========== Summary =========== -->
					<p>Inherited From <span class="classname"><a href="../System/TComponent.html">TComponent</a></span></p>
					<blockquote>
													<span class="method-name"><a href="../System/TComponent.html#methodaddParsedObject">TComponent::addParsedObject()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methodattachEventHandler">TComponent::attachEventHandler()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methodcanGetProperty">TComponent::canGetProperty()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methodcanSetProperty">TComponent::canSetProperty()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methodcreatedOnTemplate">TComponent::createdOnTemplate()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methoddetachEventHandler">TComponent::detachEventHandler()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methodevaluateExpression">TComponent::evaluateExpression()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methodevaluateStatements">TComponent::evaluateStatements()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methodgetEventHandlers">TComponent::getEventHandlers()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methodgetSubProperty">TComponent::getSubProperty()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methodhasEvent">TComponent::hasEvent()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methodhasEventHandler">TComponent::hasEventHandler()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methodhasProperty">TComponent::hasProperty()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methodraiseEvent">TComponent::raiseEvent()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#methodsetSubProperty">TComponent::setSubProperty()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#method__call">TComponent::__call()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#method__get">TComponent::__get()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#method__set">TComponent::__set()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#method__sleep">TComponent::__sleep()</a></span><br>
													<span class="method-name"><a href="../System/TComponent.html#method__wakeup">TComponent::__wakeup()</a></span><br>
											</blockquote>
										
		</div>
	</div>


	<p class="notes" id="credit">
		Documentation generated on Sat, 19 Jan 2013 13:01:20 +0100 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.4.3</a>
	</p>
	</div></body>
</html>